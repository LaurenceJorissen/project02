import{s as fe,n as oe,r as he,o as ce}from"../chunks/scheduler.B4houzoZ.js";import{S as ve,i as _e,y as me,e as u,t as se,s as I,c as p,a as L,f as ue,d as E,b as P,g as q,h as a,q as U,k as ee,l,m as N,r as ge}from"../chunks/index.DlrXzjOH.js";import{s as K}from"../chunks/supabase.DztQxiPM.js";function pe(d){let n,r,h="Email:",t,e,v,o;return{c(){n=u("div"),r=u("label"),r.textContent=h,t=I(),e=u("input"),this.h()},l(s){n=p(s,"DIV",{class:!0});var i=L(n);r=p(i,"LABEL",{for:!0,"data-svelte-h":!0}),q(r)!=="svelte-1flf0h4"&&(r.textContent=h),t=P(i),e=p(i,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),i.forEach(E),this.h()},h(){a(r,"for","email"),a(e,"type","email"),a(e,"name","email"),a(e,"id","email"),a(e,"placeholder","Email"),a(n,"class","form-group")},m(s,i){ee(s,n,i),l(n,r),l(n,t),l(n,e),U(e,d[0]),v||(o=N(e,"input",d[9]),v=!0)},p(s,i){i&1&&e.value!==s[0]&&U(e,s[0])},d(s){s&&E(n),v=!1,o()}}}function de(d){let n,r,h="Phone:",t,e,v,o;return{c(){n=u("div"),r=u("label"),r.textContent=h,t=I(),e=u("input"),this.h()},l(s){n=p(s,"DIV",{class:!0});var i=L(n);r=p(i,"LABEL",{for:!0,"data-svelte-h":!0}),q(r)!=="svelte-11y9508"&&(r.textContent=h),t=P(i),e=p(i,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),i.forEach(E),this.h()},h(){a(r,"for","phone"),a(e,"type","text"),a(e,"name","phone"),a(e,"id","phone"),a(e,"placeholder","Phone"),a(n,"class","form-group")},m(s,i){ee(s,n,i),l(n,r),l(n,t),l(n,e),U(e,d[3]),v||(o=N(e,"input",d[10]),v=!0)},p(s,i){i&8&&e.value!==s[3]&&U(e,s[3])},d(s){s&&E(n),v=!1,o()}}}function be(d){let n,r,h,t,e,v,o,s,i,T,g,O,j,B,H,D,k,G="Username:",S,f,F,w,V,te="Password:",Q,y,W,A,le='<button type="submit">Sign up</button>',X,M,ae='<a href="/login">Go back</a>',Y,Z,ne,_=d[4]==="email"&&pe(d),m=d[4]==="phone"&&de(d);return Y=me(d[7][0]),{c(){n=u("div"),r=u("div"),h=u("div"),t=u("form"),e=u("div"),v=u("label"),o=u("input"),s=se(`\r
                        Sign up with Email`),i=I(),T=u("label"),g=u("input"),O=se(`\r
                        Sign up with Phone`),j=I(),_&&_.c(),B=I(),m&&m.c(),H=I(),D=u("div"),k=u("label"),k.textContent=G,S=I(),f=u("input"),F=I(),w=u("div"),V=u("label"),V.textContent=te,Q=I(),y=u("input"),W=I(),A=u("div"),A.innerHTML=le,X=I(),M=u("div"),M.innerHTML=ae,this.h()},l(c){n=p(c,"DIV",{class:!0});var C=L(n);r=p(C,"DIV",{class:!0});var re=L(r);h=p(re,"DIV",{class:!0});var ie=L(h);t=p(ie,"FORM",{});var b=L(t);e=p(b,"DIV",{class:!0});var R=L(e);v=p(R,"LABEL",{});var $=L(v);o=p($,"INPUT",{type:!0}),s=ue($,`\r
                        Sign up with Email`),$.forEach(E),i=P(R),T=p(R,"LABEL",{});var x=L(T);g=p(x,"INPUT",{type:!0}),O=ue(x,`\r
                        Sign up with Phone`),x.forEach(E),R.forEach(E),j=P(b),_&&_.l(b),B=P(b),m&&m.l(b),H=P(b),D=p(b,"DIV",{class:!0});var z=L(D);k=p(z,"LABEL",{for:!0,"data-svelte-h":!0}),q(k)!=="svelte-1c8yrdk"&&(k.textContent=G),S=P(z),f=p(z,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),z.forEach(E),F=P(b),w=p(b,"DIV",{class:!0});var J=L(w);V=p(J,"LABEL",{for:!0,"data-svelte-h":!0}),q(V)!=="svelte-bhu94"&&(V.textContent=te),Q=P(J),y=p(J,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),J.forEach(E),W=P(b),A=p(b,"DIV",{class:!0,"data-svelte-h":!0}),q(A)!=="svelte-1sbv9qn"&&(A.innerHTML=le),X=P(b),M=p(b,"DIV",{class:!0,"data-svelte-h":!0}),q(M)!=="svelte-373jwr"&&(M.innerHTML=ae),b.forEach(E),ie.forEach(E),re.forEach(E),C.forEach(E),this.h()},h(){a(o,"type","radio"),o.__value="email",U(o,o.__value),a(g,"type","radio"),g.__value="phone",U(g,g.__value),a(e,"class","form-group"),a(k,"for","username"),a(f,"type","text"),a(f,"name","username"),a(f,"id","username"),a(f,"placeholder","Username"),a(D,"class","form-group"),a(V,"for","password"),a(y,"type","password"),a(y,"name","password"),a(y,"id","password"),a(y,"placeholder","Password"),a(w,"class","form-group"),a(A,"class","form-group"),a(M,"class","form-group"),a(h,"class","container"),a(r,"class","signup-form"),a(n,"class","signup-page"),Y.p(o,g)},m(c,C){ee(c,n,C),l(n,r),l(r,h),l(h,t),l(t,e),l(e,v),l(v,o),o.checked=o.__value===d[4],l(v,s),l(e,i),l(e,T),l(T,g),g.checked=g.__value===d[4],l(T,O),l(t,j),_&&_.m(t,null),l(t,B),m&&m.m(t,null),l(t,H),l(t,D),l(D,k),l(D,S),l(D,f),U(f,d[2]),l(t,F),l(t,w),l(w,V),l(w,Q),l(w,y),U(y,d[1]),l(t,W),l(t,A),l(t,X),l(t,M),Z||(ne=[N(o,"change",d[6]),N(g,"change",d[8]),N(f,"input",d[11]),N(y,"input",d[12]),N(t,"submit",ge(d[5]))],Z=!0)},p(c,[C]){C&16&&(o.checked=o.__value===c[4]),C&16&&(g.checked=g.__value===c[4]),c[4]==="email"?_?_.p(c,C):(_=pe(c),_.c(),_.m(t,B)):_&&(_.d(1),_=null),c[4]==="phone"?m?m.p(c,C):(m=de(c),m.c(),m.m(t,H)):m&&(m.d(1),m=null),C&4&&f.value!==c[2]&&U(f,c[2]),C&2&&y.value!==c[1]&&U(y,c[1])},i:oe,o:oe,d(c){c&&E(n),_&&_.d(),m&&m.d(),Y.r(),Z=!1,he(ne)}}}function Ee(d,n,r){let h="",t="",e="",v="",o="",s="",i="email";const T=async S=>{v=e;let f;i==="email"?f=await K.auth.signUp({email:h,password:t,options:{data:{username:e}}}):i==="phone"&&(f=await K.auth.signUp({phone:o,password:t,options:{channel:"sms",data:{username:e}}}));const{data:F,error:w}=f;if(w){console.error("Error signing up:",w),S.preventDefault(),alert("Oops, try again!");return}F&&(await K.from("users").insert([{email:h||null,phone:o||null,name:v}]),console.log("Signed up successfully"),S.preventDefault(),alert("Signed up!"),g())},g=()=>{s?console.error("Navigation error:",s):window.location.href="/login"};ce(()=>{K.auth.onAuthStateChange((S,f)=>{f!=null&&f.user,s=(f==null?void 0:f.error)||""})});const O=[[]];function j(){i=this.__value,r(4,i)}function B(){i=this.__value,r(4,i)}function H(){h=this.value,r(0,h)}function D(){o=this.value,r(3,o)}function k(){e=this.value,r(2,e)}function G(){t=this.value,r(1,t)}return[h,t,e,o,i,T,j,O,B,H,D,k,G]}class Ie extends ve{constructor(n){super(),_e(this,n,Ee,be,fe,{})}}export{Ie as component};
